# 基于信令数据的人口时空分布预测模型构建  

#### （一）   搜集内容

本研究涉及的数据源包括三个方面：一是信令数据，以及基站工参数据；二是研究所涉及到的环巢湖的行政区划、景区数据；三是其他的外部数据，包括用于验证模型的统计数据，以及已有的研究文献等。其核心是信令数据以及工参数据。

本文搜集的数据时段为2016年10月1日到30日，安徽省内的全部联通用户信令数据，以及10月份的工参数据，包括了用户主动、被动触发的所有行为的时间和位置信息。需要指出的是，信令数据与工参数据关联，才能确切的把握用户的时空行为信息，原因在于信令数据中只是记录了用户的ID，信令事件触发的时间，以及当时用户所使用的基站的编号等等，不对应具体的经纬度，但基站工参信息中，蕴含了基站的编号，以及基站的经纬度信息，相比于信令数据产生的频率，工参数据的更新要缓慢的多，主要在维修、新增等情况下进行更新，工参的信息主要由运营商在设置基站时，通过实测的方式获得。为了减小由于基站工参老旧导致的误差，所搜集的基站参数信息时段应与搜集信令的时段相对应，通过基站编号将信令事件与空间位置经纬度关联起来，最终获得完整可用的记录，如下所示：其核心字段为，用户ID、时间戳、经纬度。

表1.  抽取后的信令字段

| User_Id    | Timestamp | Loc_Id   | Long                     | Lat                      | Evevnt_Type                        |
| ---------- | --------- | -------- | ------------------------ | ------------------------ | ---------------------------------- |
| 脱敏用户ID | 精确到秒  | 基站编号 | Wgs84坐标系，保留6位小数 | Wgs84坐标系，保留6位小数 | 11、12等等，分别代表不同的事件类型 |

![img](file:///C:/Users/FEIYUX~1/AppData/Local/Temp/msohtmlclip1/01/clip_image002.gif)

图1.  信令事件类型

#### （二）   编码说明

（1）信令数据文件以文本方式保存。每行对应一条信令数据记录。

（2）每条记录内的字段之间需要有分隔符，分隔符为单字符“∣”。若某一字段信息无法获取或不存在，则填空。

（3）每条记录的各字段以竖线“∣”（ASCII编码0x7C）分隔，必须以回车换行“\r\n”（ASCII编码分别为0x0D，0x0A）结尾。文件中的最后一条记录后面也必须以回车换行“\r\n”作为结束符。

#### （三）   传输接口

数据采集采用FTP方式交换信令文本数据。位置数据平台为服务端（Server），SmartSteps平台为客户端（Client）。位置数据平台以文本方式输出信令数据文本，由SmartSteps平台下载处理。

#### （四）   数据质量检查

##### 1.        事件类型检查

事件类型，包含多种，这里以CS域信令事件为例进行说明，如图所示11代表主叫，12代表被叫，31代表开关机，32为位置更新，33代表切换，51为发短信，52为收短信。随着QQ、微信等社交软件的出现，通话和短信占比已经很低，而位置更新事件所占的比例非常高。位置更新包括周期性的位置更新以及由于位置移动导致的位置更新，两者均属于被动行为，用户无感，为保证数据的客观与可靠性奠定了良好的基础。

![img](file:///C:/Users/FEIYUX~1/AppData/Local/Temp/msohtmlclip1/01/clip_image004.gif)

图2.  信令事件结构组成

##### 2.        日信令量检查

由于网络割接等原因，会存在数据异常的情况。为此分析区域内每天的信令量变化，查看是否存在异常日期。数据分析表明，并未存在异常。

![img](file:///C:/Users/FEIYUX~1/AppData/Local/Temp/msohtmlclip1/01/clip_image006.jpg)

图3.  信令数量检查

##### 3.        缺失值检查

主要核对用户ID，时间戳，经纬度的缺失情况，四者均不能为空，且需在各自的值域范围内，对存在缺失的，予以剔除。

#### （五）   数据清洗方案

尽管大数据容忍了不准确，但为了保障结果的可靠性与科学性，仍然要剔除异常的数据。这里包括两个方面：

##### 1.        缺失值的剔除

根据之前的分析，部分手机信令数据缺少相应的经纬度坐标，影响分析。为此，对影响使用和判别的日期以及信令记录，予以直接剔除。

##### 2.        “乒乓效应”的消除

移动通信系统中，如果在一定区域里两基站信号强度剧烈变化，手机就会在两个基站间来回切换，对应的信令记录亦会不断产生，形成所谓的“乒乓效应”。

很明显，到访过存在“乒乓效应”区域的用户，信令事件会激增，为此必须予以解决。本项目采用的方案如下：对每日的信令记录进行统计，以基站对的形式，考察各对之间的切换数量，同时考虑时间长度，如果在短时间内切换数量过多，即认为存在“乒乓效应”。再利用判定的结果，提出原始信令数据中的记录，完成对数据的清洗。

 

#### （六）   本次所预测拟提供数据示例

##### 1.        数据示例

| **日期** | **小时** | **网格编号** | **驻留人数** | **出发人数** | **到达人数** |
| -------- | -------- | ------------ | ------------ | ------------ | ------------ |
| 20171108 | 8        | 1715         | 17464        | 17           | 14           |
| 20171108 | 8        | 1716         | 13264        | 21           | 11           |
| 20171108 | 8        | 1717         | 10919        | 18           | 3            |
| 20171108 | 8        | 1718         | 14994        | 29           | 19           |
| 20171108 | 8        | 1719         | 6824         | 11           | 3            |
| 20171108 | 8        | 1720         | 8765         | 28           | 7            |
| 20171108 | 8        | 1721         | 4850         | 15           | 20           |
| 20171108 | 8        | 1722         | 2663         | 7            | 4            |
| 20171108 | 8        | 1723         | 8643         | 19           | 7            |
| 20171108 | 8        | 1724         | 13444        | 16           | 12           |

##### 2.        网格空间位置数据

![https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1539319396203&di=bc2af38272b95eb23f2a1ba8f542b698&imgtype=0&src=http%3A%2F%2Fimg0.pconline.com.cn%2Fpconline%2F1708%2F21%2F9820005_201782158812647_thumb.jpg](file:///C:/Users/FEIYUX~1/AppData/Local/Temp/msohtmlclip1/01/clip_image008.jpg)

示例如上，通过网格ID跟数据可以关联。

